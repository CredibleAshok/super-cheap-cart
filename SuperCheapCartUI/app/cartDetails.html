<div ng-controller="cartController as vm">
    <div class="loaderoverlay container" ng-if="vm.isbusy == true">
        <!--This is where the spinner div should appear -->
        <div class="loading-bar-spinner">
            <!--This is the icon itself-->
            <span>
                Please Wait...
                <i class="fa fa-spinner fa-spin"></i>
            </span>
        </div>
    </div>
    <form id="cartForm">
        <div class="panel-heading">Review Your Cart {{vm.numberOfItemsInCart}}</div>
        <div class="panel-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-condensed table-hover">
                    <thead>
                        <tr>
                            <th class="col-sm-1">Sr No.</th>
                            <th class="col-sm-4">Product Name</th>
                            <th class="col-sm-1">Unit Price</th>
                            <th class="col-sm-4">Quantity</th>
                            <th class="col-sm-2">Total Amt</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="product in vm.allItemsInCart">
                            <td class="col-sm-1">{{$index + 1}}</td>
                            <td class="col-sm-4">{{product.Name}}</td>
                            <td class="col-sm-1">{{vm.currencyCode}}{{product.Price}}</td>
                            <td class="col-sm-4">
                                <button ng-click="vm.addProductQuantity(product)">+</button>
                                <input type="number" ng-model="product.Quantity" style="max-width:30px;" />
                                <button ng-click="vm.removeProductQuantity(product)">-</button>
                            </td>
                            <td class="col-sm-2">{{vm.currencyCode}}{{product.totalAmt}}</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="text-align:right;"><b>Total Price: {{vm.currencyCode}}{{vm.totalCartPrice}}</b></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="panel-footer">
            <button name="btnContinue" ng-click="vm.closeModal()">Continue Shopping</button>
            <button name="btnContinue" ng-click="vm.proceedToCheckout(product)">Proceed Checkout</button>
            <button name="btnContinue" ng-click="vm.closeModal()">Cancel</button>
        </div>
    </form>
</div>